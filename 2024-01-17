#include <string>
#include <vector>

using namespace std;

int solution(vector<string> friends, vector<string> gifts) {
    int answer = 0;
    int s = friends.size();
    vector<vector<int>> gt(s, vector<int>(s, 0));
    vector<int> score(s, 0);
    vector<int> give(s, 0);
    vector<int> take(s, 0);
    vector<int> present(s, 0);
    
    for(int i = 0; i < s; i++){
        for(int k = 0; k < gifts.size(); k++){
            size_t spacePos = gifts[k].find(' ');
            if(friends[i] == gifts[k].substr(0, spacePos)){
                string temp = gifts[k].substr(spacePos + 1);
                for(int j = 0; j < s; j++){
                    if(friends[j] == temp){
                        gt[i][j] += 1;
                        
                    }  
                }
            } 
        }
    }
    
    for (int i = 0; i < s; i++) {
        for (int j = 0; j < s; j++) {
            give[i] += gt[i][j];
            take[i] += gt[j][i];
            score[i] = give[i] - take[i];
        }
    }
    
    for (int i = 0; i < s; i++) {
        for (int j = 0; j < s; j++) {
            if (take[j] != 0) { // 주고 받은 선물이 있는 경우
                if (gt[i][j] > gt[j][i]) {
                    present[i] += 1;
                } else if (gt[i][j] == gt[j][i]) { //주고 받은 선물 수가 같은 경우
                    if (score[i] > score[j]) {
                        present[i] += 1;
                    }
                }
            } else if (gt[i][j] == 0 && gt[j][i] == 0) { // 기록이 없는 경우
                if (score[i] > score[j]) {
                    present[i] += 1;
                }
            }
        }
    }
    
    for (int i = 0; i < s; i++) {
        if (present[i] > answer) {
            answer = present[i];
        }
    }
    return answer;
}
